<div *ngIf="!showResetForm">
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header text-center">
            <h1>Login</h1>
          </div>
          <div class="card-body">
            <form (ngSubmit)="onSubmit()" [formGroup]="loginForm" id="loginForm">
              <fieldset class="form-group">
                <label for="email">Email: *</label>
                <input
                  formControlName="email"
                  name="email"
                  id="email"
                  type="email"
                  class="form-control"
                  placeholder="Enter your email"
                  required
                />
              </fieldset>

              <fieldset class="form-group">
                <label for="password">Password: *</label>
                <input
                  formControlName="password"
                  name="password"
                  id="password"
                  type="password"
                  class="form-control"
                  placeholder="Enter your password"
                  required
                />
              </fieldset>

              <div *ngIf="errorMessage" class="alert alert-danger mt-3">
                {{ errorMessage }}
              </div>

              <fieldset class="form-group">
                <button class="btn btn-info btn-block" type="submit">Login</button>
                <hr />
                Need an account?
                <a class="link" routerLink="/register" title="Register">Register</a>
              </fieldset>

              <!-- Display resend verification email option if applicable -->
              <div *ngIf="showResendEmailOption">
                <button (click)="resendVerificationEmail()" class="btn btn-primary btn-block">
                  Resend Verification Email
                </button>
              </div>

              <fieldset class="form-group text-left">
                <a class="link" (click)="toggleForm()" id="fp-link">Forgot Password?</a>
              </fieldset>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div *ngIf="failedAttempts >= 3" class="text-center mt-3">
  <p>Are you trying to brute force?</p>
  <iframe
      width="560"
      height="315"
      src="https://www.youtube.com/embed/Jl0CmfZNeWM?autoplay=1&mute=0"
      title="Are you trying to brute force?"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen
    ></iframe>
</div>

<div *ngIf="showResetForm">
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header text-center">
            <h1>Reset Password</h1>
          </div>
          <div class="card-body">
            <form (ngSubmit)="forgotPassword()" [formGroup]="resetForm">
              <fieldset class="form-group">
                <label for="resetEmail">Email: </label>
                <input
                  formControlName="email"
                  name="email"
                  id="resetEmail"
                  type="email"
                  class="form-control"
                  placeholder="Enter your email"
                  required
                />
              </fieldset>

              <div class="action-buttons">
                <button class="btn btn-info btn-block" type="submit">
                  Send Forgot Password Email
                </button>
                <button class="btn btn-info btn-block" (click)="revertForm()">
                  Cancel
                </button>
              </div>

              <div *ngIf="resetPasswordMessage" class="alert alert-success mt-3">
                {{ resetPasswordMessage }}
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<router-outlet></router-outlet>
