<div class="pageTitle">
  <h1>Your Education</h1>
  <small>Be school, stay in cool.</small>
</div>

<!-- List of Added Educations -->
<table class="table table-striped table-hover education-table animate-table">
  <thead class="thead-light">
    <tr>
      <th>School Name</th>
      <th>Degree</th>
      <th>Start Date</th>
      <th>End Date</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let edu of educations; let i = index" class="education-entry animate-entry">
      <td>{{ edu.schoolName }}</td>
      <td>{{ edu.degreeName }}</td>
      <td>{{ edu.startDate }}</td>
      <td>{{ edu.endDate || 'Present' }}</td>
      <td>
        <button class="btn btn-warning btn-sm" (click)="editEducation(edu, i)">Edit</button>
        <button class="btn btn-danger btn-sm" (click)="removeEducation(i)">Remove</button>
      </td>
    </tr>
  </tbody>
</table>

<div id="add-button">
  <!-- Add Another Education Button (Visible only when form is hidden and not in edit mode) -->
  <button id="add" *ngIf="!showForm && !isEditing && educations.length > 0" class="btn btn-primary mt-3" (click)="showEducationForm()">Add Another Education</button>
</div>

<!-- Education Form (Visible if there are no educations or when user clicks 'Add Another Education') -->
<div *ngIf="showForm" class="mt-4">
  <form [formGroup]="educationForm" (ngSubmit)="onAddOrUpdateEducation($event)" class="container mt-5 p-4 border rounded shadow">
    <h2 class="text-center mb-4">{{ isEditing ? 'Edit Education' : 'Add Schooling' }}</h2>

    <!-- School Name -->
    <div class="mb-3">
      <label for="schoolName" class="form-label">School Name:</label>
      <input id="schoolName" formControlName="schoolName" type="text" class="form-control" required>
    </div>

    <!-- Start Date -->
    <div class="mb-3">
      <label for="startDate" class="form-label">Start Date (mm/yyyy):</label>
      <input id="startDate" formControlName="startDate" type="text" class="form-control" placeholder="mm/yyyy" required>
      <div *ngIf="educationForm.controls['startDate'].invalid && educationForm.controls['startDate'].touched" class="text-danger">
        <small>Please enter a valid start date in mm/yyyy format.</small>
      </div>
    </div>

    <!-- End Date (optional) -->
    <div class="mb-3">
      <label for="endDate" class="form-label">End Date (mm/yyyy):</label>
      <input id="endDate" formControlName="endDate" type="text" class="form-control" placeholder="mm/yyyy">
      <div *ngIf="educationForm.controls['endDate'].invalid && educationForm.controls['endDate'].touched" class="text-danger">
        <small>Please enter a valid end date in mm/yyyy format.</small>
      </div>
    </div>

    <!-- Degree Type -->
    <div class="mb-3">
      <label for="degreeType" class="form-label">Degree Type:</label>
      <input id="degreeType" formControlName="degreeType" type="text" class="form-control" required>
    </div>

    <!-- Degree Name -->
    <div class="mb-3">
      <label for="degreeName" class="form-label">Degree Name:</label>
      <input id="degreeName" formControlName="degreeName" type="text" class="form-control" required>
    </div>

    <!-- Details -->
    <div class="mb-3">
      <label for="details" class="form-label">Details:</label>
      <textarea id="details" formControlName="details" class="form-control"></textarea>
    </div>

    <button type="submit" class="btn btn-success">{{ isEditing ? 'Update Education' : 'Add Education' }}</button>
    <button type="button" class="btn btn-secondary" (click)="cancelNewEducation()">Cancel</button>
  </form>
</div>

<!-- Navigation Buttons -->
<div class="d-flex justify-content-between mt-4">
  <button class="btn btn-outline-secondary" (click)="onBack()">Back</button>
  <button class="btn btn-success" (click)="onNext()" [disabled]="educations.length === 0">Next</button>
</div>
